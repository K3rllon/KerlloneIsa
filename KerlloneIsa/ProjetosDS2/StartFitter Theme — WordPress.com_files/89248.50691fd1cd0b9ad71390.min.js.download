"use strict";(globalThis.webpackChunkcalypso=globalThis.webpackChunkcalypso||[]).push([[89248],{"./lib/query-manager/post/constants.js":(e,t,s)=>{s.d(t,{u:()=>r});let r={context:"display",http_envelope:!1,pretty:!1,number:20,offset:0,page:1,order:"DESC",order_by:"date",type:"post",status:"publish",sticky:"include",search:""}},"./lib/query-manager/schema.js":(e,t,s)=>{s.d(t,{A:()=>u,q:()=>o});var r=s("../node_modules/deep-freeze/index.js"),a=s.n(r),i=s("../node_modules/lodash-es/cloneDeepWith.js");let n=a()({additionalProperties:!1,required:["data","options"],type:"object",properties:{data:{additionalProperties:!1,type:"object",properties:{items:{type:"object"},queries:{additionalProperties:!1,type:"object",patternProperties:{"^\\[.*\\]$":{required:["itemKeys"],type:"object",properties:{itemKeys:{type:"array",items:{type:["integer","null","string"]}},found:{type:"integer"}}}}}}},options:{additionalProperties:!0,required:["itemKey"],type:"object",properties:{itemKey:{type:"string"}}}}});function o(e){return(0,i.A)(n,t=>{if(t===n.properties.data.properties.items)return e})}let u=n},"./state/admin-menu/actions/index.js":(e,t,s)=>{s.d(t,{W:()=>i,i:()=>a}),s("./state/admin-menu/init.js"),s("./state/data-layer/wpcom/sites/admin-menu/index.js");var r=s("./state/action-types.ts");let a=function(e){return{type:r.of3,siteId:e}},i=function(e,t){return{type:r._o9,siteId:e,menu:t}}},"./state/admin-menu/init.js":(e,t,s)=>{var r=s("./state/redux-store.ts"),a=s("../packages/state-utils/src/index.ts"),i=s("./state/action-types.ts"),n=s("./state/utils/schema-utils.js"),o=s("./state/utils/keyed-reducer.ts"),u=s("./state/utils/with-persistence.ts"),d=s("./state/utils/reducer-utils.ts");s("./state/data-layer/wpcom/sites/admin-menu/index.js");let c={slug:{type:"string"},title:{type:"string"},type:{type:"string"},url:{type:"string"},badge:{type:"string"}},l={type:"array",items:{type:"object",required:["type"],properties:{...c,icon:{type:"string"},children:{type:"array",items:{type:"object",required:["type","parent"],properties:{...c,parent:{type:"string"}}}}}},additionalProperties:!1},p=(0,n.N)({type:"object",patternProperties:{"^\\d+$":l}},(0,o.b)("siteId",(0,u.O)((e=[],t)=>t.type===i._o9?t.menu:e))),m=(0,d.H)({menus:p,requesting:(e=!1,t)=>{switch(t.type){case i.of3:case i._o9:return t.type===i.of3}return e}}),_=(0,a.p6)("adminMenu",m);(0,r.K)(["adminMenu"],_)},"./state/analytics/actions/record.js":(e,t,s)=>{s.d(t,{Oy:()=>n,el:()=>o,hE:()=>i});var r=s("./state/action-types.ts");let a=(e,t)=>({type:r.C2g,meta:{analytics:[{type:r.C2g,payload:Object.assign({},{service:e},t)}]}}),i=(e,t,s,r)=>a("ga",{category:e,action:t,label:s,value:r}),n=(e,t)=>a("tracks",{name:e,properties:t}),o=(e,t,s,a={},i={})=>({type:r.zIF,meta:{analytics:[{type:r.zIF,payload:{service:s,url:e,title:t,options:i,...a}}]}})},"./state/data-layer/wpcom-http/actions.js":(e,t,s)=>{s.d(t,{L:()=>a});var r=s("./state/action-types.ts");let a=({apiVersion:e,apiNamespace:t,body:s,method:a,path:i,query:n={},formData:o,onSuccess:u,onFailure:d,onProgress:c,onStreamRecord:l,...p},m=null)=>({type:r.Mg6,body:s,method:a,path:i,query:{...n,...t?{apiNamespace:t}:{apiVersion:e}},formData:o,onSuccess:u||m,onFailure:d||m,onProgress:c||m,onStreamRecord:l||m,options:p})},"./state/data-layer/wpcom/sites/admin-menu/index.js":(e,t,s)=>{var r=s("./lib/url/add-query-args.ts"),a=s("./state/action-types.ts"),i=s("./state/admin-menu/actions/index.js"),n=s("./state/data-layer/handler-registry.js"),o=s("./state/data-layer/wpcom-http/actions.js"),u=s("./state/data-layer/wpcom-http/utils.js"),d=s("./state/sites/selectors/get-site-admin-url.ts"),c=s("./state/sites/selectors/get-site-slug.js");let l=(e,t)=>{let s=RegExp("^/").test(e),a=RegExp(`^${t?.replace(/^https?:\/\//,"")}`).test(e?.replace(/^https?:\/\//,"")),i=/^https:\/\/jetpack\.com\/redirect\//.test(e);return(a&&e?.includes("wp-admin/customize.php")&&(e=(0,r.A)({return:document.location.href},e)),s||a||i)?e:""},p=(e,t,s)=>{let r;return e?(Array.isArray(e.children)&&(r=e.children.map(e=>p(e,t,s))),{...e,url:l(e.url,s),...r?{children:r}:{}}):e};(0,n.vZ)("state/data-layer/wpcom/admin-menu/index.js",{[a.of3]:[(0,u.wH)({fetch:e=>(0,o.L)({method:"GET",path:`/sites/${e.siteId}/admin-menu/`,apiNamespace:"wpcom/v2"},e),onSuccess:({siteId:e},t)=>(s,r)=>{if(!Array.isArray(t))return s((0,i.W)(e,t));let a=r(),n=(0,d.A)(a,e),o=(0,c.A)(a,e);return s((0,i.W)(e,t.map(e=>p(e,o,n))))},onError:()=>null})]})},"./state/posts/constants.js":(e,t,s)=>{s.d(t,{b:()=>a,u:()=>r});let r={context:"display",http_envelope:!1,pretty:!1,number:20,offset:0,page:1,order:"DESC",order_by:"date",type:"post",status:"publish",sticky:"include",search:""},a=["publish","draft","pending","private","future","trash"]},"./state/posts/init.js":(e,t,s)=>{var r=s("./state/redux-store.ts"),a=s("../node_modules/lodash-es/reduce.js"),i=s("../node_modules/lodash-es/findKey.js"),n=s("../node_modules/lodash-es/omit.js"),o=s("../node_modules/lodash-es/mapValues.js"),u=s("../node_modules/lodash-es/get.js"),d=s("../node_modules/lodash-es/merge.js"),c=s("../node_modules/lodash-es/omitBy.js"),l=s("../node_modules/lodash-es/isEqual.js"),p=s("../node_modules/lodash-es/isEmpty.js"),m=s("../node_modules/lodash-es/set.js"),_=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),y=s("../node_modules/lodash-es/some.js"),h=s("../node_modules/moment/moment.js"),f=s.n(h),g=s("./lib/query-manager/paginated/index.js"),b=s("./lib/query-manager/post/constants.js"),I=s("./lib/query-manager/paginated/key.js");function A(e,t){return null==e||b.u[t]===e}class j extends I.A{static stringify(e){return super.stringify((0,c.A)(e,A))}static parse(e){return(0,c.A)(super.parse(e),A)}}class v extends g.A{static matches(e,t){let s=Object.assign({},this.DefaultQuery,e);return Object.entries(s).every(([e,s])=>{switch(e){case"search":{if(!s)return!0;let e=s.toLowerCase();return t.title&&t.title.toLowerCase().includes(e)||t.content&&t.content.toLowerCase().includes(e)}case"after":case"before":case"modified_after":case"modified_before":{let r=f()(s,f().ISO_8601),a=/after$/.test(e)?"isAfter":"isBefore",i=/^modified_/.test(e)?"modified":"date";return r.isValid()&&f()(t[i])[a](r)}case"term":return Object.entries(s).every(([e,s])=>(s=s.split(","),(0,y.A)(t.terms[e],({slug:e})=>s.includes(e))));case"tag":case"category":{if(!s)return!0;let r=s.toLowerCase(),a="tag"===e?"tags":"categories";return(0,y.A)(t[a],({name:e,slug:t})=>e&&e.toLowerCase()===r||t&&t.toLowerCase()===r)}case"type":return"any"===s||s===t.type;case"parent_id":return s===t.parent||t.parent&&s===t.parent.ID;case"exclude":if(Array.isArray(s))return!s.includes(t.ID);return s!==t.ID;case"sticky":if("require"===s)return t.sticky;if("exclude"===s)return!t.sticky;break;case"author":return(0,u.A)(t,"author.ID",t.author)===s;case"status":return"any"===s||String(s).split(",").some(s=>s===t[e])}return!0})}static compare(e,t,s){let r;switch(e.order_by){case"ID":r=t.ID-s.ID;break;case"comment_count":r=(0,u.A)(t.discussion,"comment_count",0)-(0,u.A)(s.discussion,"comment_count",0);break;case"title":r=t.title.localeCompare(s.title);break;case"modified":r=new Date(t.modified)-new Date(s.modified);break;default:r=new Date(t.date)-new Date(s.date)}return(!e.order||/^desc$/i.test(e.order))&&(r*=-1),r||0}}(0,_.A)(v,"QueryKey",j),(0,_.A)(v,"DefaultQuery",b.u);var D=s("./lib/query-manager/with-query-manager.js"),w=s("./state/action-types.ts"),k=s("./state/utils/schema-utils.js"),P=s("./state/utils/with-persistence.ts"),x=s("./state/utils/reducer-utils.ts"),S=s("../node_modules/lodash-es/pick.js");let L={type:"object",patternProperties:{"^[0-9]+$":{type:"object",patternProperties:{"^[\\w-]+$":{type:"object",patternProperties:{"^(all|mine)$":{type:"object",patternProperties:{"^\\w+$":{type:"integer"}},additionalProperties:!1}},additionalProperties:!1}},additionalProperties:!1}},additionalProperties:!1},N=(()=>{let e;let t={};function s(s,r,a,i){let o=[r,a].join(),c=t[o];if(!c)return s;let l=["all"];c.authorId===e&&l.push("mine");let p=l.reduce((e,t)=>{let a=(0,u.A)(s,[r,c.type,t],{});return e[t]={},e[t][c.status]=Math.max((a[c.status]||0)-1,0),"deleted"!==i&&(e[t][i]=(a[i]||0)+1),e},{});return"deleted"===i?t=(0,n.A)(t,o):c.status=i,(0,d.A)(p,{all:{},mine:{}}),(0,d.A)({},s,{[r]:{[c.type]:p}})}return(0,k.N)(L,(r={},a)=>{switch(a.type){case w.q58:e=void 0,t={};break;case w.i7J:e=a.user.ID;break;case w.SnV:a.posts.forEach(e=>{let a=[e.site_ID,e.ID].join(),i=t[a];i&&e.status!==i.status&&(r=s(r,e.site_ID,e.ID,e.status)),t[a]=(0,S.A)(e,"type","status"),t[a].authorId=(0,u.A)(e.author,"ID")});break;case w.LpR:{let{siteId:e,postId:t,post:i}=a;if(!i.status)return r;return s(r,e,t,i.status)}case w.JH$:return s(r,a.siteId,a.postId,"deleted");case w.mnW:return(0,d.A)({},r,{[a.siteId]:{[a.postType]:a.counts}})}return r})})(),R=(0,x.H)({requesting:function(e={},t){switch(t.type){case w.EcY:case w.O7i:case w.ZHu:return(0,d.A)({},e,{[t.siteId]:{[t.postType]:w.EcY===t.type}})}return e},counts:N});var O=s("./state/utils/keyed-reducer.ts");let U=(0,k.N)({type:"object",additionalProperties:!1,required:["iLike","found"],properties:{likes:{type:"array",description:"List of post likes"},iLike:{type:"boolean",description:"Whether the current authenticated user likes the post or not"},found:{type:"number",description:"The total of post likes"},lastUpdated:{type:"number",description:"When we last updated the liker info"}}},(e={likes:void 0,iLike:!1,found:0,lastUpdated:void 0},t)=>{switch(t.type){case w.ouM:{let{likes:s}=t;return{likes:Array.isArray(s)?s.map(e=>({ID:e.ID,avatar_URL:e.avatar_URL,login:e.login,name:e.name,site_ID:e.site_ID,site_visible:e.site_visible})):void 0,found:e.found,iLike:e.iLike,lastUpdated:e.lastUpdated}}case w.eRR:{let{iLike:s,found:r}=t;return{iLike:s,found:r,likes:e.likes,lastUpdated:Date.now()}}case w.z0p:if(e.iLike)break;return{likes:e.likes,iLike:!0,found:e.found+1,lastUpdated:e.lastUpdated};case w.OWR:if(!e.iLike)break;return{likes:e.likes,iLike:!1,found:Math.max(0,e.found-1),lastUpdated:e.lastUpdated};case w._Il:{let{liker:s}=t,r=e?.likes??[],a=r.some(e=>e.ID===s.ID);if(a)return e;return{likes:[s,...r],iLike:e.iLike,found:e.found,lastUpdated:e.lastUpdated}}case w.T3Z:{let{liker:s}=t,r=e?.likes??[],a=r.some(e=>e.ID===s.ID);if(!a)return e;return{likes:r.filter(e=>e.ID!==s.ID),iLike:e.iLike,found:e.found,lastUpdated:e.lastUpdated}}}return e}),q=(0,O.b)("siteId",(0,O.b)("postId",U)),E=(0,x.H)({items:q});var F=s("../node_modules/lodash-es/filter.js"),C=s("../node_modules/lodash-es/keyBy.js");let T=(0,x.H)({items:function(e={},t){return t.type===w.e2S?(0,a.A)(t.users,(t,s)=>(t===e&&(t={...e}),t[s.ID]=s,t),e):e}}),$=(0,x.H)({diffs:function(e={},{diffs:t,postId:s,revisions:r,revision_fields:a,siteId:i,type:o}){if(o!==w.ygr||!Number.isInteger(i)||i<=0)return e;let d=(0,u.A)(e,[i,s],{}),c={...(0,u.A)(d,"revisions",{}),...r},l=(0,F.A)(t,({diff:e,from:t,to:s})=>!(!Number.isInteger(t)||t<0||!Number.isInteger(s)||s<1||0!==t&&(0,p.A)(c[t])||(0,p.A)(c[s]))&&!(0,p.A)(e));return(0,p.A)(l)?e:{...e,[i]:{...e[i],[s]:{...{...(0,n.A)(d,"revisions"),...(0,C.A)(l,e=>`${e.from}:${e.to}`)},revisions:c,revisionFields:a}}}},selection:function(e={},t){switch(t.type){case w.$CS:return{...e,revisionId:t.revisionId};case w.uy_:case w.r1v:return{...e,revisionId:null};default:return e}},ui:function(e={},t){switch(t.type){case w.SU4:return{...e,isDialogVisible:!1};case w._qL:return{...e,isDialogVisible:!0};case w.zdM:return{...e,diffView:"split"};case w.iON:return{...e,diffView:"unified"};default:return e}},authors:T});var K=s("./lib/query-manager/schema.js");let z={type:"object",patternProperties:{"^\\d+$":K.A},additionalProperties:!1};var W=s("./state/posts/utils/get-serialized-posts-query.js"),M=s("../node_modules/lodash-es/cloneDeep.js"),H=s("../node_modules/lodash-es/map.js");let V=(e,t)=>{if(t.length>1){let[,...s]=t;V(e[t[0]],s);return}e&&e.hasOwnProperty(t[0])&&delete e[t[0]]};function B(e){let t=(0,M.A)(e);return(0,a.A)([[],...(0,a.A)(e.terms,(e,t,s)=>e.concat((0,H.A)(t,(e,t)=>["terms",s,t])),[]),...(0,H.A)(e.categories,(e,t)=>["categories",t]),...(0,H.A)(e.tags,(e,t)=>["tags",t]),...(0,H.A)(e.attachments,(e,t)=>["attachments",t])],(e,t)=>(V(e,t.concat("meta","links")),e),t)}var Q=s("./state/posts/utils/merge-post-edits.js"),Z=s("../node_modules/lodash-es/find.js"),G=s("../node_modules/lodash-es/last.js");let J=(0,k.N)({type:"object",patternProperties:{"^\\w+$":{type:"array",items:{type:"number"},minItems:2,maxItems:2}},additionalProperties:!1},(e={},t)=>{switch(t.type){case w.SnV:return(0,a.A)(t.posts,(t,s)=>{let{site_ID:r,ID:a,global_ID:i}=s;return t[i]||(t===e&&(t={...t}),t[i]=[r,a]),t},e);case w.DiK:{let s=(0,i.A)(e,([e,s])=>e===t.siteId&&s===t.postId);if(!s)return e;return(0,n.A)(e,s)}}return e}),Y=(0,k.N)(z,(0,P.O)((e={},t)=>{switch(t.type){case w.WFp:{let{siteId:s,query:r,posts:a,found:i}=t;if(!s)return e;let n=a.map(B);return(0,D.A)(e,s,e=>e.receive(n,{query:r,found:i}),()=>new v)}case w.SnV:{let{posts:s}=t,r=(0,a.A)(s,(e,t)=>Object.assign(e,{[t.site_ID]:[...e[t.site_ID]||[],B(t)]}),{});return(0,a.A)(r,(e,t,s)=>(0,D.A)(e,s,e=>e.receive(t),()=>new v),e)}case w.kwZ:{let{siteId:s,postId:r}=t;return(0,D.A)(e,s,e=>e.receive({ID:r,status:"__RESTORE_PENDING"},{patch:!0}))}case w.rU$:{let{siteId:s,postId:r}=t;return(0,D.A)(e,s,e=>e.receive({ID:r,status:"trash"},{patch:!0}))}case w.LpR:{let{siteId:s,postId:r,post:a}=t;return(0,D.A)(e,s,e=>e.receive({ID:r,...a},{patch:!0}))}case w.JH$:{let{siteId:s,postId:r}=t;return(0,D.A)(e,s,e=>e.receive({ID:r,status:"__DELETE_PENDING"},{patch:!0}))}case w.aNL:{let{siteId:s,postId:r}=t;return(0,D.A)(e,s,e=>e.receive({ID:r,status:"trash"},{patch:!0}))}case w.DiK:{let{siteId:s,postId:r}=t;return(0,D.A)(e,s,e=>e.removeItem(r))}}return e},{serialize:e=>(0,o.A)(e,({data:e,options:t})=>({data:e,options:t})),deserialize:e=>(0,o.A)(e,({data:e,options:t})=>new v(e,t))}));function X(e,t,s){return(0,i.A)(e.data.items,e=>e.site_ID===t&&e.ID===s)||null}let ee=(0,k.N)(K.A,(0,P.O)((e=new v({},{itemKey:"global_ID"}),t)=>{switch(t.type){case w.WFp:{let{siteId:s,query:r,posts:a,found:i}=t;if(s)return e;return e.receive(a.map(B),{query:r,found:i})}case w.SnV:{let{posts:s}=t;return e.receive(s)}case w.kwZ:{let{siteId:s,postId:r}=t,a=X(e,s,r);return e.receive({global_ID:a,status:"__RESTORE_PENDING"},{patch:!0})}case w.rU$:{let{siteId:s,postId:r}=t,a=X(e,s,r);return e.receive({global_ID:a,status:"trash"},{patch:!0})}case w.LpR:{let{siteId:s,postId:r,post:a}=t,i=X(e,s,r);return e.receive({global_ID:i,...a},{patch:!0})}case w.JH$:{let{siteId:s,postId:r}=t,a=X(e,s,r);return e.receive({global_ID:a,status:"__DELETE_PENDING"},{patch:!0})}case w.aNL:{let{siteId:s,postId:r}=t,a=X(e,s,r);return e.receive({global_ID:a,status:"trash"},{patch:!0})}case w.DiK:{let{siteId:s,postId:r}=t,a=X(e,s,r);return e.removeItem(a)}}return e},{serialize:({data:e,options:t})=>({data:e,options:t}),deserialize:({data:e,options:t})=>new v(e,t)})),et=(0,x.H)({counts:R,items:J,siteRequests:function(e={},t){switch(t.type){case w.ZKv:case w.zjT:case w._cX:return Object.assign({},e,{[t.siteId]:Object.assign({},e[t.siteId],{[t.postId]:w.ZKv===t.type})})}return e},queryRequests:function(e={},t){switch(t.type){case w.EYb:case w.WFp:case w.xBc:let s=(0,W.K)(t.query,t.siteId);return Object.assign({},e,{[s]:w.EYb===t.type})}return e},queries:Y,allSitesQueries:ee,edits:function(e={},t){switch(t.type){case w.SnV:return(0,a.A)(t.posts,(s,r)=>{let a=(0,u.A)(s,[r.site_ID,r.ID]);if(!a)return s;if(s===e&&(s=(0,d.A)({},e)),t.saveMarker){let e=a.indexOf(t.saveMarker);-1!==e&&(a=a.slice(e+1))}let i=(0,Q.A)(...a),n=null;if(i){let e=(0,c.A)(i,(e,t)=>{var s,a,i,n,o;switch(t){case"author":return s=r[t],(0,u.A)(e,"ID")===(0,u.A)(s,"ID");case"date":return a=r[t],!1===e||e&&new Date(e).getTime()===new Date(a).getTime();case"discussion":return i=r[t],Object.entries(e).every(([e,t])=>(0,u.A)(i,[e])===t);case"featured_image":return e===(r?"featured_image"in r&&!/^https?:\/\//.test(r.featured_image)?r.featured_image:r.post_thumbnail?r.post_thumbnail.ID:void 0:void 0);case"metadata":return!0;case"status":return n=r[t],["publish","future"].includes(e)?["publish","future"].includes(n):e===n;case"terms":return o=r[t],Object.entries(e).every(([e,t])=>{let s=Object.values(t),r="object"==typeof s[0]&&null!==s[0],a=new Set(r?s.map(e=>e.ID):s),i=r?"ID":"name",n=o[e]?Object.values(o[e]):[],u=new Set(n.length>0?n.map(e=>e[i]):n);if(a.size!==u.size)return!1;for(let e of a)if(!u.has(e))return!1;return!0})}return(0,l.A)(r[t],e)});if(i.metadata){var o,_;let t=(o=i.metadata,_=r.metadata,(0,F.A)(o,e=>(function(e,t){let s=(0,Z.A)(t,{key:e.key});return"update"===e.operation?!s||s.value!==e.value:"delete"===e.operation&&!!s})(e,_)));t.length>0&&(e.metadata=t)}(0,p.A)(e)||(n=[e])}return(0,m.A)(s,[r.site_ID,r.ID],n)},e);case w.uy_:{let s=t.siteId,r=t.postId||"",a=(0,u.A)(e,[s,r]),i=function(e,t){if((0,p.A)(e))return[t];let s=(0,G.A)(e);if("string"==typeof s)return[...e,t];let r=e.slice(0,-1);return r.push((0,Q.A)(s,t)),r}(a,t.post);return{...e,[s]:{...e[s],[r]:i}}}case w.bAA:return Object.assign({},e,{[t.siteId]:{...e[t.siteId],[t.postId||""]:null}});case w.tQ4:if(!e.hasOwnProperty(t.siteId))break;return Object.assign({},e,{[t.siteId]:(0,n.A)(e[t.siteId],t.postId||"")});case w.ROT:{let s=t.siteId,r=t.postId||"";if(""===r&&t.savedPost&&e[s]){let r=t.savedPost.ID;e={...e,[s]:Object.fromEntries(Object.entries(e[s]).map(([e,t])=>[""===e?r:e,t]))}}}}return e},likes:E,revisions:$});(0,r.K)(["posts"],et)},"./state/posts/utils/get-normalized-posts-query.js":(e,t,s)=>{s.d(t,{V:()=>i});var r=s("../node_modules/lodash-es/omitBy.js"),a=s("./state/posts/constants.js");function i(e){return(0,r.A)(e,(e,t)=>a.u[t]===e)}},"./state/posts/utils/get-serialized-posts-query.js":(e,t,s)=>{s.d(t,{K:()=>a});var r=s("./state/posts/utils/get-normalized-posts-query.js");function a(e={},t){let s=(0,r.V)(e),a=JSON.stringify(s);return t?[t,a].join(":"):a}},"./state/posts/utils/merge-post-edits.js":(e,t,s)=>{s.d(t,{A:()=>u});var r=s("../node_modules/lodash-es/reject.js"),a=s("../node_modules/lodash-es/find.js"),i=s("../node_modules/lodash-es/reduce.js"),n=s("../node_modules/lodash-es/mergeWith.js"),o=s("../node_modules/lodash-es/cloneDeep.js");let u=(...e)=>(0,i.A)(e,(e,t)=>"string"==typeof t?e:null===e?t:(0,n.A)((0,o.A)(e),t,(e,t,s,i,n,o)=>"metadata"===s&&0===o.size?function(e,t){let s=(0,r.A)(e,e=>(0,a.A)(t,{key:e.key}));return s.concat(t)}(e,t):Array.isArray(t)?t:void 0),null)},"./state/purchases/init.js":(e,t,s)=>{var r=s("./state/redux-store.ts"),a=s("../packages/state-utils/src/index.ts"),i=s("./state/action-types.ts");let n={data:[],error:null,isFetchingSitePurchases:!1,isFetchingUserPurchases:!1,hasLoadedSitePurchasesFromServer:!1,hasLoadedUserPurchasesFromServer:!1};function o(e,t){var s;return t.type===i.IQi?t.purchases:(t.type===i.UKF&&(e=e.filter(e=>!!(parseInt(e.blog_id,10)!==parseInt(t.siteId,10)||t.purchases.some(t=>t.ID===e.ID)))),t.type===i.fNM&&(e=e.filter(e=>!!t.purchases.some(t=>t.ID===e.ID))),s=e,t.purchases.reduce((e,t)=>(function(e,t){let s=!1,r=e.map(e=>t.ID===e.ID?(s=!0,t):e);return s?r:[...r,t]})(e,t),s))}let u=(0,a.p6)("purchases",(e=n,t)=>{switch(t.type){case i.gbd:return{...e,data:[],hasLoadedSitePurchasesFromServer:!1,hasLoadedUserPurchasesFromServer:!1};case i.i4G:return{...e,isFetchingSitePurchases:!0};case i.qqc:return{...e,isFetchingUserPurchases:!0};case i.fNM:return{...e,data:o(e.data,t),error:null,isFetchingSitePurchases:!1,isFetchingUserPurchases:!1,hasLoadedSitePurchasesFromServer:!0,hasLoadedUserPurchasesFromServer:!0};case i.UKF:return{...e,data:o(e.data,t),error:null,isFetchingSitePurchases:!1,hasLoadedSitePurchasesFromServer:!0};case i.IQi:return{...e,data:o(e.data,t),error:null,isFetchingUserPurchases:!1,hasLoadedUserPurchasesFromServer:!0};case i.p21:return{...e,error:t.error,hasLoadedSitePurchasesFromServer:!0,hasLoadedUserPurchasesFromServer:!0};case i.C4:return{...e,error:t.error,hasLoadedSitePurchasesFromServer:!0,isFetchingSitePurchases:!1};case i.qE$:return{...e,error:t.error,hasLoadedUserPurchasesFromServer:!0,isFetchingUserPurchases:!1};case i.pWI:return{...e,hasLoadedSitePurchasesFromServer:!1,isFetchingSitePurchases:!1}}return e});(0,r.K)(["purchases"],u)},"./state/purchases/selectors/get-purchases.js":(e,t,s)=>{s.d(t,{P:()=>o});var r=s("../packages/state-utils/src/index.ts"),a=s("../packages/data-stores/src/purchases/lib/assembler.ts");let i={createPurchaseObject:a.B,createPurchasesArray:a.O},n=i.createPurchasesArray;s("./state/purchases/init.js");let o=(0,r.Mz)(e=>n(e.purchases.data),e=>[e.purchases.data])},"./state/selectors/is-site-automated-transfer.ts":(e,t,s)=>{s.d(t,{A:()=>r});function r(e,t){return t?e?.sites?.items?.[t]?.options?.is_automated_transfer??null:null}},"./state/site-settings/init.js":(e,t,s)=>{var r=s("./state/redux-store.ts"),a=s("../packages/state-utils/src/index.ts"),i=s("./state/action-types.ts"),n=s("./state/utils/schema-utils.js"),o=s("./state/utils/reducer-utils.ts");let u=(0,n.N)({type:"object",additionalProperties:!1,patternProperties:{"^\\d+$":{type:"object"}}},(e={},t)=>{switch(t.type){case i.c9v:{let{siteId:s,settings:r}=t;return{...e,[s]:r}}case i.QIt:{let{siteId:s,settings:r}=t;return{...e,[s]:{...e[s],...r}}}case i.lRE:{let{siteId:s,mediaIds:r}=t,a=e[s];if(!a||!(Array.isArray(r)&&r.includes(a.site_icon)))return e;return{...e,[s]:{...a,site_icon:null}}}}return e}),d=(0,o.H)({items:u,requesting:(e={},t)=>{switch(t.type){case i.iAC:{let{siteId:s}=t;return{...e,[s]:!0}}case i.Mfm:{let{siteId:s}=t;return{...e,[s]:!1}}case i.$JZ:{let{siteId:s}=t;return{...e,[s]:!1}}}return e},saveRequests:(e={},t)=>{switch(t.type){case i.idb:{let{siteId:s}=t;return{...e,[s]:{saving:!0,status:"pending",error:!1}}}case i.m1O:{let{siteId:s}=t;return{...e,[s]:{saving:!1,status:"success",error:!1}}}case i.PWB:{let{siteId:s,error:r}=t;return{...e,[s]:{saving:!1,status:"error",error:r}}}}return e}}),c=(0,a.p6)("siteSettings",d);(0,r.K)(["siteSettings"],c)},"./state/sites/selectors/get-site-admin-url.ts":(e,t,s)=>{s.d(t,{A:()=>a});var r=s("./state/sites/selectors/get-site-option.ts");function a(e,t,s=""){let a=(0,r.A)(e,t,"admin_url");return a?a+s.replace(/^\//,""):null}},"../packages/data-stores/src/purchases/lib/assembler.ts":(e,t,s)=>{s.d(t,{B:()=>a,O:()=>i});var r=s("../packages/js-utils/src/snake-to-camel-case.ts");function a(e){let t={id:Number(e.ID),active:!!e.active,amount:Number(e.amount),attachedToPurchaseId:Number(e.attached_to_purchase_id),autoRenewCouponCode:e.auto_renew_coupon_code,autoRenewCouponDiscountPercentage:Number(e.auto_renew_coupon_discount_percentage),billPeriodDays:Number(e.bill_period_days),billPeriodLabel:e.bill_period_label,mostRecentRenewDate:e.most_recent_renew_date,asyncPendingPaymentBlockIsSet:e.async_pending_payment_block_is_set,canDisableAutoRenew:!!e.can_disable_auto_renew,canReenableAutoRenewal:!!e.can_reenable_auto_renewal,canExplicitRenew:!!e.can_explicit_renew,costToUnbundle:e.cost_to_unbundle?Number(e.cost_to_unbundle):Number(e.amount),costToUnbundleText:e.cost_to_unbundle_display?e.cost_to_unbundle_display:e.price_text,currencyCode:e.currency_code,currencySymbol:e.currency_symbol,description:e.description,domain:e.domain,domainRegistrationAgreementUrl:e.domain_registration_agreement_url||null,error:null,blogCreatedDate:e.blog_created_date,expiryDate:e.expiry_date,expiryStatus:(0,r.A)(e.expiry_status),iapPurchaseManagementLink:e.iap_purchase_management_link,includedDomain:e.included_domain,includedDomainPurchaseAmount:e.included_domain_purchase_amount,introductoryOffer:e.introductory_offer?{costPerInterval:Number(e.introductory_offer.cost_per_interval),endDate:String(e.introductory_offer.end_date),intervalCount:Number(e.introductory_offer.interval_count),intervalUnit:String(e.introductory_offer.interval_unit),isWithinPeriod:!!e.introductory_offer.is_within_period,transitionAfterRenewalCount:Number(e.introductory_offer.transition_after_renewal_count),isNextRenewalUsingOffer:!!e.introductory_offer.is_next_renewal_using_offer,remainingRenewalsUsingOffer:Number(e.introductory_offer.remaining_renewals_using_offer),shouldProrateWhenOfferEnds:!!e.introductory_offer.should_prorate_when_offer_ends,isNextRenewalProrated:!!e.introductory_offer.is_next_renewal_prorated}:null,isCancelable:!!e.is_cancelable,isDomain:!!e.is_domain,isDomainRegistration:!!e.is_domain_registration,isHundredYearDomain:!!e.is_hundred_year_domain,isLocked:!!e.is_locked,isInAppPurchase:!!e.is_iap_purchase,isRechargeable:!!e.is_rechargable,isRefundable:!!e.is_refundable,isRenewable:!!e.is_renewable,isRenewal:!!e.is_renewal,isWooExpressTrial:!!e.is_woo_express_trial,meta:e.meta,ownershipId:Number(e.ownership_id),priceText:e.price_text,priceTierList:e.price_tier_list?.map(e=>({minimumUnits:e.minimum_units,maximumUnits:e.maximum_units,minimumPrice:e.minimum_price,maximumPrice:e.maximum_price,minimumPriceDisplay:e.minimum_price_display,maximumPriceDisplay:e.maximum_price_display})),partnerName:e.partner_name,partnerSlug:e.partner_slug,partnerType:e.partner_type,partnerKeyId:e.partner_key_id,payment:{name:e.payment_name,type:e.payment_type,countryCode:e.payment_country_code,countryName:e.payment_country_name,storedDetailsId:e.stored_details_id},pendingTransfer:!!e.pending_transfer,productId:Number(e.product_id),productName:e.product_name,productSlug:e.product_slug,productType:e.product_type,productDisplayPrice:e.product_display_price,priceInteger:e.price_integer,totalRefundAmount:Number(e.total_refund_amount),totalRefundInteger:Number(e.total_refund_integer),totalRefundCurrency:e.total_refund_currency,totalRefundText:e.total_refund_text,refundAmount:Number(e.refund_amount),refundInteger:Number(e.refund_integer),refundOptions:e.refund_options,refundText:e.refund_text,refundPeriodInDays:e.refund_period_in_days,regularPriceText:e.regular_price_text,regularPriceInteger:e.regular_price_integer,renewDate:e.renew_date,saleAmount:e.sale_amount,saleAmountInteger:e.sale_amount_integer,siteId:Number(e.blog_id),siteName:e.blogname,subscribedDate:e.subscribed_date,subscriptionStatus:e.subscription_status,tagLine:e.tag_line,taxAmount:e.tax_amount,taxText:e.tax_text,purchaseRenewalQuantity:e.renewal_price_tier_usage_quantity||null,userId:Number(e.user_id),isAutoRenewEnabled:1===parseInt(e.auto_renew??"")};return"credit_card"===e.payment_type&&(t.payment.creditCard={id:Number(e.payment_card_id),type:e.payment_card_type,displayBrand:e.payment_card_display_brand,processor:e.payment_card_processor,number:e.payment_details,expiryDate:e.payment_expiry}),"paypal_direct"===e.payment_type&&(t.payment.expiryDate=e.payment_expiry),t}function i(e){return Array.isArray(e)?e.map(a):[]}},"../packages/js-utils/src/snake-to-camel-case.ts":(e,t,s)=>{s.d(t,{A:()=>r});function r(e){return e?e.toLowerCase().replace(/([-_][a-z0-9])/g,e=>e.toUpperCase().replace("-","").replace("_","")):""}}}]);